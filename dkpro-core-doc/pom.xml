<!--
  Copyright 2017
  Ubiquitous Knowledge Processing (UKP) Lab
  Technische UniversitÃ¤t Darmstadt

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.dkpro.core</groupId>
    <artifactId>dkpro-core-asl</artifactId>
    <version>2.4.0-SNAPSHOT</version>
    <relativePath>../dkpro-core-asl</relativePath>
  </parent>
  <packaging>jar</packaging>
  <artifactId>dkpro-core-doc-asl</artifactId>
  <name>DKPro Core ASL - Documentation</name>
  <url>https://dkpro.github.io/dkpro-core/</url>
  <properties>
    <maven.deploy.skip>true</maven.deploy.skip>
  </properties>
  <dependencies>
    <dependency>
      <groupId>org.apache.groovy</groupId>
      <artifactId>groovy</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.groovy</groupId>
      <artifactId>groovy-xml</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.groovy</groupId>
      <artifactId>groovy-templates</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-lang3</artifactId>
    </dependency>
    <dependency>
      <groupId>org.yaml</groupId>
      <artifactId>snakeyaml</artifactId>
    </dependency>
    <dependency>
      <groupId>org.dkpro.meta</groupId>
      <artifactId>dkpro-meta-core</artifactId>
      <version>0.4.0</version>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.gmaven</groupId>
        <artifactId>groovy-maven-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
          <classpathScope>compile</classpathScope>
        </configuration>
        <executions>
          <execution>
            <id>generate-documentation</id>
            <phase>process-classes</phase>
            <goals>
              <goal>execute</goal>
            </goals>
            <configuration>
              <source>
                <![CDATA[
                import org.dkpro.meta.core.maven.ContextHolder;
                
                ContextHolder.setBinding(binding);
                org.dkpro.core.doc.DocumentationBuilder.main();
                ]]>
              </source>
            </configuration>
          </execution>
          <execution>
            <id>pom-sanity-check</id>
            <phase>process-classes</phase>
            <goals>
              <goal>execute</goal>
            </goals>
            <configuration>
              <source>
                <![CDATA[
                import org.dkpro.meta.core.maven.ContextHolder;
                
                ContextHolder.setBinding(binding);
                org.dkpro.core.doc.PomSanityCheck.main();
                ]]>
              </source>
            </configuration>
          </execution>
        </executions>
        <dependencies>
          <dependency>
            <groupId>org.yaml</groupId>
            <artifactId>snakeyaml</artifactId>
            <version>${snakeyaml.version}</version>
          </dependency>
        </dependencies>
      </plugin>
      <plugin>
        <groupId>org.asciidoctor</groupId>
        <artifactId>asciidoctor-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>user-guide-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>user-guide.adoc</sourceDocumentName>
              <imagesDir>./user-guide/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/user-guide/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <!--
            <execution>
            <id>user-guide-pdf</id>
            <phase>prepare-package</phase>
            <goals>
            <goal>process-asciidoc</goal>
            </goals>
            <configuration>
            <backend>pdf</backend>
            <sourceDocumentName>user-guide.adoc</sourceDocumentName>
            <imagesDir>./user-guide/images</imagesDir>
            <attributes>
            <toc>preamble</toc>
            <include-dir>./user-guide/</include-dir>
            </attributes>
            </configuration>
            </execution>
          -->
          <execution>
            <id>developer-guide-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>developer-guide.adoc</sourceDocumentName>
              <imagesDir>./developer-guide/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/developer-guide/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>typesystem-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>typesystem-reference.adoc</sourceDocumentName>
              <imagesDir>./typesystem-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/typesystem-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>tagset-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>tagset-reference.adoc</sourceDocumentName>
              <imagesDir>./tagset-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/tagset-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>component-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>component-reference.adoc</sourceDocumentName>
              <imagesDir>./component-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/component-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>format-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>format-reference.adoc</sourceDocumentName>
              <imagesDir>./format-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/format-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>dataset-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>dataset-reference.adoc</sourceDocumentName>
              <imagesDir>./dataset-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>${project.basedir}/src/main/asciidoc/dataset-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>model-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>model-reference.adoc</sourceDocumentName>
              <imagesDir>./model-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>./model-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
          <execution>
            <id>language-reference-html</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>process-asciidoc</goal>
            </goals>
            <configuration>
              <backend>html5</backend>
              <sourceDocumentName>language-reference.adoc</sourceDocumentName>
              <imagesDir>./language-reference/images</imagesDir>
              <doctype>book</doctype>
              <attributes>
                <toc>left</toc>
                <include-dir>./language-reference/</include-dir>
                <source-dir>${project.basedir}/../</source-dir>
                <generated-dir>${project.basedir}/target/generated-adoc/</generated-dir>
              </attributes>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.asciidoctor</groupId>
          <artifactId>asciidoctor-maven-plugin</artifactId>
          <configuration>
            <attributes>
              <toclevels>8</toclevels>
              <sectanchors>true</sectanchors>
              <docinfo1>true</docinfo1>
              <project-version>${project.version}</project-version>
              <revnumber>${project.version}</revnumber>
              <icons>font</icons>
            </attributes>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-dependency-plugin</artifactId>
          <configuration>
            <usedDependencies combine.children="append">
              <!-- Dependencies used in Groovy scripts not detected -->
              <usedDependency>org.apache.commons:commons-lang3</usedDependency>
            </usedDependencies>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
  <profiles>
    <profile>
      <id>groovy</id>
      <activation>
        <file>
          <exists>src/main/groovy</exists>
        </file>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>org.codehaus.gmavenplus</groupId>
            <artifactId>gmavenplus-plugin</artifactId>
            <version>2.1.0</version>
            <executions>
              <execution>
                <id>build</id>
                <goals>
                  <goal>addSources</goal>
                  <goal>addTestSources</goal>
                  <goal>generateStubs</goal>
                  <goal>compile</goal>
                  <goal>generateTestStubs</goal>
                  <goal>compileTests</goal>
                  <goal>removeStubs</goal>
                  <goal>removeTestStubs</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>com.bluetrainsoftware.maven</groupId>
            <artifactId>groovydoc-maven-plugin</artifactId>
            <version>2.1</version>
            <executions>
              <execution>
                <id>attach-docs</id>
                <phase>package</phase>
                <goals>
                  <goal>attach-docs</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <!-- We already build and attach a source JAR using the groovydoc-maven-plugin -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <configuration>
              <skipSource>true</skipSource>
            </configuration>
          </plugin>
        </plugins>
        <pluginManagement>
          <plugins>
            <!--
              - This plugin's configuration is used to store Eclipse m2e settings only.
              - It has no influence on the Maven build itself.
            -->
            <plugin>
              <groupId>org.eclipse.m2e</groupId>
              <artifactId>lifecycle-mapping</artifactId>
              <version>1.0.0</version>
              <configuration>
                <lifecycleMappingMetadata>
                  <pluginExecutions>
                    <pluginExecution>
                      <pluginExecutionFilter>
                        <groupId>org.asciidoctor</groupId>
                        <artifactId>asciidoctor-maven-plugin</artifactId>
                        <versionRange>[1.5.3,)</versionRange>
                        <goals>
                          <goal>process-asciidoc</goal>
                        </goals>
                      </pluginExecutionFilter>
                      <action>
                        <ignore />
                      </action>
                    </pluginExecution>
                    <pluginExecution>
                      <pluginExecutionFilter>
                        <groupId>org.codehaus.gmavenplus</groupId>
                        <artifactId>gmavenplus-plugin</artifactId>
                        <versionRange>[1.5,)</versionRange>
                        <goals>
                          <goal>execute</goal>
                        </goals>
                      </pluginExecutionFilter>
                      <action>
                        <ignore />
                      </action>
                    </pluginExecution>
                    <pluginExecution>
                      <pluginExecutionFilter>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <versionRange>[1,)</versionRange>
                        <goals>
                          <goal>enforce</goal>
                        </goals>
                      </pluginExecutionFilter>
                      <action>
                        <ignore />
                      </action>
                    </pluginExecution>
                    <pluginExecution>
                      <pluginExecutionFilter>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-remote-resources-plugin</artifactId>
                        <versionRange>[1.4,)</versionRange>
                        <goals>
                          <goal>process</goal>
                        </goals>
                      </pluginExecutionFilter>
                      <action>
                        <ignore />
                      </action>
                    </pluginExecution>
                  </pluginExecutions>
                </lifecycleMappingMetadata>
              </configuration>
            </plugin>
          </plugins>
        </pluginManagement>
      </build>
    </profile>
  </profiles>
</project>